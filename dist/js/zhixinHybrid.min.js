"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};!function(i){"function"==typeof require&&"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module))?i(module.exports||exports):"function"==typeof define&&define.amd?define(["exports"],i):i(window.zhixinHybrid={})}(function(zhixinExports){var zhixinHybrid=void 0!==zhixinExports?zhixinExports:{};return localStorage.clear(),localStorage.prepared=!1,zhixinHybrid.isAvailable=function(i){return!!i&&(localStorage.prepared&&window.zhixin&&window.zhixin[i]&&"function"==typeof window.zhixin[i])},zhixinHybrid.requestHybridToZHIXIN=function(i){if(localStorage.prepared)if(i.tagname){var n=i.tagname.substr(0,i.tagname.indexOf("("));if(i.callback){if("function"===!_typeof(i.callback))return void console.error("回调函数不是一个function");var o=n+"_"+RandomTagName(),e=i.callback.toString().replace(/([^:]\/{2,}.*?(\r|\n))/g,"").replace(/\n/g,"");console.log(e),localStorage.setItem(o,e);var r=o;i.callback=n,zhixinHybrid._addHybridParamWiThCallBack(n,i,r)}else zhixinHybrid._addHybridParam(n,i)}else console.log("必须包含tagname");else console.log("客户端未加载完成，请稍后再试！")},zhixinHybrid._addHybridParam=function(i,n){var o=n.tagname.match(/\([^\)]+\)/g);if(!o)return zhixinHybrid._request(i);if(0<(o=(o=o[0]).substring(1,o.length-1).split(",")).length){if(!n.param)return void console.log("当前方法需要传递参数！");var e,r=0;for(e in n.param)r++;if(o.length!=r)return void console.log("当前方法需要传递参数个数与实际传入的个数不符！")}return 1==o.length?zhixinHybrid._request(i,n.param[o[0]]):2==o.length?zhixinHybrid._request(i,n.param[o[0]],n.param[o[1]]):void console.error("投递参数不合法！")},zhixinHybrid._addHybridParamWiThCallBack=function(i,n,o){var e=n.tagname.match(/\([^\)]+\)/g);if(!e)return zhixinHybrid._requestWithCallBack(i,o);if(0<(e=(e=e[0]).substring(1,e.length-1).split(",")).length){if(!n.param)return void console.error("当前方法需要传递参数！");var r,a=0;for(r in n.param)a++;if(e.length!=a)return void console.error("当前方法需要传递参数个数与实际传入的个数不符！")}return 1==e.length?zhixinHybrid._requestWithCallBack(i,o,n.param[e[0]]):2==e.length?zhixinHybrid._requestWithCallBack(i,o,n.param[e[0]],n.param[e[1]]):void console.error("投递参数不合法！")},zhixinHybrid._requestWithCallBack=function(i,n,o,e){o||e||window.zhixin[i](n),o&&!e&&window.zhixin[i](n,o),o&&e&&window.zhixin[i](n,o,e)},zhixinHybrid._request=function(i,n,o){n||o||window.zhixin[i](),n&&!o&&window.zhixin[i](n),n&&o&&window.zhixin[i](n,o)},window.onZhiXinLoad=function(){localStorage.prepared=!0,window.afterZhiXinLoad&&window.afterZhiXinLoad()},window.RandomTagName=function(){for(var i="abcdefghijklmnopqrstuvwxyz",n="",o=0;o<5;o++){var e=Math.floor(Math.random()*i.length);n+=i.charAt(e)}return n+"_"+(new Date).getTime()},window.callbackExec=function(result){if(console.log("中转方法:"+(void 0===result?"undefined":_typeof(result))),"onZhiXinLoad"!==result.callback){var callbackStr=localStorage.getItem(result.callback);console.log("callbackStr:"+callbackStr),console.log("localStorage length:"+localStorage.length);try{var finalFuncStr="("+callbackStr+")("+JSON.stringify(result)+")";console.log("exec: "+finalFuncStr);var callbackFunc=eval(finalFuncStr)}catch(i){alert("sid获取错误:"+i.message)}}else window.onZhiXinLoad()},window.callback=function(i){console.log("返回结果:"+JSON.stringify(i)),i&&i.callback?window.callbackExec(i):console.log("callback not found")},window.test=1,window.tmpFn={},window.bindTime=(new Date).toString(),window.onerror=function(i,n,o){console.log("第"+o+"行\n"+i+"\n bindTime:"+window.bindTime)},zhixinHybrid});