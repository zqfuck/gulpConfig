"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function jsonpCallback(e){webim.setJsonpLastRspData(e)}function initHistoryMsg(e,t){if(1==t)for(var o=0;o<=e.length-1;o++){var n=JSON.parse(e[o]);webim.Log.warn("receive a new avchatroom group msg: "+n.fromAccountNick),showHistoryBeforeMsg(n)}else for(o=e.length-1;0<=o;o--){n=JSON.parse(e[o]);webim.Log.warn("receive a new avchatroom group msg: "+n.fromAccountNick),showHistoryMsg(n)}}function onBigGroupMsgNotify(e){for(var t=e.length-1;0<=t;t--){var o=e[t];webim.Log.warn("receive a new avchatroom group msg: "+o.getFromAccountNick()),o.getSubType()!=webim.GROUP_MSG_SUB_TYPE.TIP&&($.ajax({type:"get",url:getname,data:{nick:o.fromAccount},dataType:"json",async:!1,success:function(e){0<e.length&&(o.fromAccountNick=e)}}),showMsg(o))}}function onMsgNotify(e){for(var t in e)handlderMsg(e[t])}function handlderMsg(e){var t,o,n,i,a=e.getFromAccount();switch(a=a||"",t=(t=e.getFromAccountNick())||a,o=e.getSession().type(),n=e.getSubType(),o){case webim.SESSION_TYPE.C2C:switch(n){case webim.C2C_MSG_SUB_TYPE.COMMON:i=convertMsgtoHtml(e),webim.Log.warn("receive a new c2c msg: fromAccountNick="+t+", content="+i);var r={To_Account:a,LastedMsgTime:e.getTime()};webim.c2CMsgReaded(r),alert("收到一条c2c消息(好友消息或者全员推送消息): 发送人="+t+", 内容="+i)}break;case webim.SESSION_TYPE.GROUP:}}function sdkLogin(){webim.login(loginInfo,listeners,options,function(e){webim.Log.info("webim登录成功"),applyJoinBigGroup(avChatRoomId),hideDiscussForm(),initEmotionUL()},function(e){})}function applyJoinBigGroup(t){var e={GroupId:t};webim.applyJoinBigGroup(e,function(e){e.JoinedStatus&&"JoinedSuccess"==e.JoinedStatus?(webim.Log.info("进群成功"),selToID=t):alert("进群失败")},function(e){alert(e.ErrorInfo)})}function showHistoryBeforeMsg(e){var t,o,n,i,a,r,s,l,c,d,u=e.fromAccount;u=u||"",t=(t=e.fromAccountNick?e.fromAccountNick:u)||"未知用户",o=document.getElementById("video_sms_list"),n=document.createElement("li"),(i=document.createElement("div")).setAttribute("class","video-sms-pane"),(a=document.createElement("div")).setAttribute("class","video-sms-text"),r=document.createElement("span");var m=["red","green","blue","org"],f=m[Math.round(u.length%m.length)];r.setAttribute("title",t),r.setAttribute("class","user-name-"+f),r.innerHTML=webim.Tool.formatText2Html(""+t),(s=document.createElement("div")).setAttribute("class","type-triangle"),(l=document.createElement("span")).setAttribute("class","user-comment"),l.innerHTML=convertHistoryMsgtoHtml(e),(d=document.createElement("span")).setAttribute("title","举报"),d.setAttribute("class","user-report"),(c=document.createElement("span")).setAttribute("class","time-right"),c.innerHTML=formatDate(e.time),a.appendChild(c),a.appendChild(r),a.appendChild(s),a.appendChild(l),a.appendChild(d),i.appendChild(a),n.appendChild(i),o.prepend(n)}function showHistoryMsg(e){var t,o,n,i,a,r,s,l,c,d,u=e.fromAccount;u=u||"",t=(t=e.fromAccountNick?e.fromAccountNick:u)||"未知用户",o=document.getElementById("video_sms_list"),n=document.createElement("li"),(i=document.createElement("div")).setAttribute("class","video-sms-pane"),(a=document.createElement("div")).setAttribute("class","video-sms-text"),r=document.createElement("span");var m=["red","green","blue","org"],f=m[Math.round(u.length%m.length)];r.setAttribute("title",t),r.setAttribute("class","user-name-"+f),r.innerHTML=webim.Tool.formatText2Html(""+t),(s=document.createElement("div")).setAttribute("class","type-triangle"),(l=document.createElement("span")).setAttribute("class","user-comment"),l.innerHTML=convertHistoryMsgtoHtml(e),(d=document.createElement("span")).setAttribute("title","举报"),d.setAttribute("class","user-report"),(c=document.createElement("span")).setAttribute("class","time-right"),c.innerHTML=formatDate(e.time),a.appendChild(c),a.appendChild(r),a.appendChild(s),a.appendChild(l),a.appendChild(d),i.appendChild(a),n.appendChild(i),o.appendChild(n),$(".video-comment-content").mCustomScrollbar("scrollTo","bottom",{scrollInertia:300})}function showMsg(e){var t,o,n,i,a,r,s,l,c,d,u=e.getFromAccount();u=u||"",t=(t=e.getFromAccountNick())||"未知用户",n=document.getElementById("video_sms_list"),i=document.createElement("li"),(a=document.createElement("div")).setAttribute("class","video-sms-pane"),(r=document.createElement("div")).setAttribute("class","video-sms-text"),s=document.createElement("span");var m=["red","green","blue","org"],f=m[Math.round(u.length%m.length)];switch(s.setAttribute("title",t),s.setAttribute("class","user-name-"+f),s.innerHTML=webim.Tool.formatText2Html(""+t),(d=document.createElement("span")).setAttribute("title","举报"),d.setAttribute("class","user-report"),(l=document.createElement("span")).setAttribute("class","user-comment"),e.getSession().type(),o=e.getSubType(),e.getIsSend(),o){case webim.GROUP_MSG_SUB_TYPE.COMMON:l.innerHTML=convertMsgtoHtml(e);break;case webim.GROUP_MSG_SUB_TYPE.REDPACKET:l.innerHTML="[群红包消息]"+convertMsgtoHtml(e);break;case webim.GROUP_MSG_SUB_TYPE.LOVEMSG:l.innerHTML="[点赞消息]"+convertMsgtoHtml(e),showLoveMsgAnimation();break;case webim.GROUP_MSG_SUB_TYPE.TIP:l.innerHTML="[群提示消息]"+convertMsgtoHtml(e);break;default:l.innerHTML=e.tipText}var p,h=formatDate(Date.parse(new Date));(p=document.createElement("div")).setAttribute("class","type-triangle"),(c=document.createElement("span")).setAttribute("class","time-right"),c.innerHTML=h,r.appendChild(c),r.appendChild(s),r.appendChild(p),r.appendChild(l),r.appendChild(d),a.appendChild(r),i.appendChild(a),n.appendChild(i),10<=$("#video_sms_list>li").length&&$("#video_sms_list>li:first-child").remove(),$(".video-comment-content").mCustomScrollbar("scrollTo","bottom",{scrollInertia:300})}function convertHistoryMsgtoHtml(e){var t,o,n,i="",a=e.elems;for(var r in a)switch(o=(t=a[r]).type,n=t.content,o){case webim.MSG_ELEMENT_TYPE.TEXT:i+=convertHistoryTextMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.FACE:i+=convertHistoryFaceMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.IMAGE:i+=convertImageMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.SOUND:i+=convertSoundMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.FILE:i+=convertFileMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.LOCATION:break;case webim.MSG_ELEMENT_TYPE.CUSTOM:i+=convertCustomMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.GROUP_TIP:i+=convertGroupTipMsgToHtml(n);break;default:webim.Log.error("未知消息元素类型: elemType="+o)}return webim.Tool.formatHtml2Text(i)}function convertMsgtoHtml(e){var t,o,n,i="",a=e.getElems();for(var r in a)switch(o=(t=a[r]).getType(),n=t.getContent(),o){case webim.MSG_ELEMENT_TYPE.TEXT:i+=convertTextMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.FACE:i+=convertFaceMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.IMAGE:i+=convertImageMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.SOUND:i+=convertSoundMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.FILE:i+=convertFileMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.LOCATION:break;case webim.MSG_ELEMENT_TYPE.CUSTOM:i+=convertCustomMsgToHtml(n);break;case webim.MSG_ELEMENT_TYPE.GROUP_TIP:i+=convertGroupTipMsgToHtml(n);break;default:webim.Log.error("未知消息元素类型: elemType="+o)}return webim.Tool.formatHtml2Text(i)}function convertHistoryTextMsgToHtml(e){return e.text}function convertTextMsgToHtml(e){return e.getText()}function convertHistoryFaceMsgToHtml(e){var t=null,o=e.data,n=webim.EmotionDataIndexs[o],i=webim.Emotions[n];return i&&i[1]&&(t=i[1]),t?"<img src='"+t+"'/>":o}function convertFaceMsgToHtml(e){var t=null,o=e.getData(),n=webim.EmotionDataIndexs[o],i=webim.Emotions[n];return i&&i[1]&&(t=i[1]),t?"<img src='"+t+"'/>":o}function convertImageMsgToHtml(e){var t=e.getImage(webim.IMAGE_TYPE.SMALL),o=(o=e.getImage(webim.IMAGE_TYPE.LARGE))||t,n=(n=e.getImage(webim.IMAGE_TYPE.ORIGIN))||t;return"<img src='"+t.getUrl()+"#"+o.getUrl()+"#"+n.getUrl()+"' style='CURSOR: hand' id='"+e.getImageId()+"' bigImgUrl='"+o.getUrl()+"' onclick='imageClick(this)' />"}function convertSoundMsgToHtml(e){e.getSecond();var t=e.getDownUrl();return"ie"==webim.BROWSER_INFO.type&&parseInt(webim.BROWSER_INFO.ver)<=8?"[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:"+t:'<audio src="'+t+'" controls="controls" onplay="onChangePlayAudio(this)" preload="none"></audio>'}function convertFileMsgToHtml(e){var t=Math.round(e.getSize()/1024);return'<a href="'+e.getDownUrl()+'" title="点击下载文件" ><i class="glyphicon glyphicon-file">&nbsp;'+e.getName()+"("+t+"KB)</i></a>"}function convertLocationMsgToHtml(e){return"经度="+e.getLongitude()+",纬度="+e.getLatitude()+",描述="+e.getDesc()}function convertCustomMsgToHtml(e){return"data="+e.getData()+", desc="+e.getDesc()+", ext="+e.getExt()}function convertGroupTipMsgToHtml(e){var t,o,n="",i=e.getOpType(),a=e.getOpUserId();switch(i){case webim.GROUP_TIP_TYPE.JOIN:for(var r in t=e.getUserIdList())if(n+=t[r]+",",10<t.length&&9==r){n+="等"+t.length+"人";break}n=n.substring(0,n.length-1),n+="进入房间",o=$("#user-icon-fans").html(),$("#user-icon-fans").html(parseInt(o)+1);break;case webim.GROUP_TIP_TYPE.QUIT:n+=a+"离开房间",0<(o=parseInt($("#user-icon-fans").html()))&&$("#user-icon-fans").html(o-1);break;case webim.GROUP_TIP_TYPE.KICK:for(var r in n+=a+"将",t=e.getUserIdList())if(n+=t[r]+",",10<t.length&&9==r){n+="等"+t.length+"人";break}n+="踢出该群";break;case webim.GROUP_TIP_TYPE.SET_ADMIN:for(var r in n+=a+"将",t=e.getUserIdList())if(n+=t[r]+",",10<t.length&&9==r){n+="等"+t.length+"人";break}n+="设为管理员";break;case webim.GROUP_TIP_TYPE.CANCEL_ADMIN:for(var r in n+=a+"取消",t=e.getUserIdList())if(n+=t[r]+",",10<t.length&&9==r){n+="等"+t.length+"人";break}n+="的管理员资格";break;case webim.GROUP_TIP_TYPE.MODIFY_GROUP_INFO:n+=a+"修改了群资料：";var s,l,c=e.getGroupInfoList();for(var r in c)switch(s=c[r].getType(),l=c[r].getValue(),s){case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.FACE_URL:n+="群头像为"+l+"; ";break;case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NAME:n+="群名称为"+l+"; ";break;case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.OWNER:n+="群主为"+l+"; ";break;case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NOTIFICATION:n+="群公告为"+l+"; ";break;case webim.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.INTRODUCTION:n+="群简介为"+l+"; ";break;default:n+="未知信息为:type="+s+",value="+l+"; "}break;case webim.GROUP_TIP_TYPE.MODIFY_MEMBER_INFO:n+=a+"修改了群成员资料:";var d,u=e.getMemberInfoList();for(var r in u)if(n+=u[r].getUserId()+": ",n+=null!=(d=u[r].getShutupTime())&&void 0!==d?0==d?"取消禁言; ":"禁言"+d+"秒; ":" shutupTime为空",10<u.length&&9==r){n+="等"+u.length+"人";break}break;default:n+="未知群提示消息类型：type="+i}return n}function tlsLogin(){TLSHelper.goLogin({sdkappid:loginInfo.sdkAppID,acctype:loginInfo.accountType,url:window.location.href})}function tlsGetUserSig(e){var t;e.ErrorCode==webim.TLS_ERROR_CODE.OK?(loginInfo.identifier=webim.Tool.getQueryString("identifier"),loginInfo.userSig=e.UserSig,loginInfo.sdkAppID=loginInfo.appIDAt3rd=Number(webim.Tool.getQueryString("sdkappid")),(t=webim.Tool.getCookie("accountType"))?(loginInfo.accountType=t,sdkLogin()):location.href=location.href.replace(/\?.*$/gi,"")):e.ErrorCode==webim.TLS_ERROR_CODE.SIGNATURE_EXPIRATION?tlsLogin():alert("["+e.ErrorCode+"]"+e.ErrorInfo)}function imageClick(e){var t=e.src.split("#"),o=t[0],n=t[1],i=t[2];webim.Log.info("小图url:"+o),webim.Log.info("大图url:"+n),webim.Log.info("原图url:"+i)}function onChangePlayAudio(e){curPlayAudio?curPlayAudio!=e&&(curPlayAudio.currentTime=0,curPlayAudio.pause(),curPlayAudio=e):curPlayAudio=e}function smsPicClick(){loginInfo.identifier?(hideDiscussTool(),showDiscussForm()):1==accountMode?(webim.Tool.setCookie("accountType",loginInfo.accountType,86400),tlsLogin()):(alert("请填写帐号和票据"),$("#login_dialog").show())}function onSendMsg(){if(loginInfo.identifier){if(!selToID)return alert("您还没有进入房间，暂不能聊天"),void $("#send_msg_text").val("");var e=$("#send_msg_text").val();$("#send_msg_text").val("");var t=webim.Tool.getStrBytes(e);if(e.length<1)window.wxc.xcConfirm("发送的消息不能为空",window.wxc.xcConfirm.typeEnum);else{var o,n=(o=selType==webim.SESSION_TYPE.GROUP?webim.MSG_MAX_LENGTH.GROUP:webim.MSG_MAX_LENGTH.C2C,"消息长度超出限制(最多"+Math.round(o/3)+"汉字)");if(o<t)alert(n);else if($.ajax({type:"post",url:filterurl,data:{content:e,tid:tid,nick:loginInfo.identifierNick},dataType:"json",async:!1,success:function(e){filterVal=!0,0!=e.state&&(filterVal=!1,window.wxc.xcConfirm(e.msg,window.wxc.xcConfirm.typeEnum))}}),filterVal){selSess=selSess||new webim.Session(selType,selToID,selToID,selSessHeadUrl,Math.round((new Date).getTime()/1e3));var i,a,r,s,l,c=Math.round(4294967296*Math.random()),d=Math.round((new Date).getTime()/1e3),u=selType==webim.SESSION_TYPE.GROUP?webim.GROUP_MSG_SUB_TYPE.COMMON:webim.C2C_MSG_SUB_TYPE.COMMON,m=new webim.Msg(selSess,!0,-1,c,d,loginInfo.identifier,u,loginInfo.identifierNick),f=e.match(/\[[^[\]]{1,3}\]/gm);if(!f||f.length<1)i=new webim.Msg.Elem.Text(e),m.addText(i);else{for(var p=0;p<f.length;p++)(r=e.substring(0,e.indexOf(f[p])))&&(i=new webim.Msg.Elem.Text(r),m.addText(i)),s=webim.EmotionDataIndexs[f[p]],webim.Emotions[s]?(a=new webim.Msg.Elem.Face(s,f[p]),m.addFace(a)):(i=new webim.Msg.Elem.Text(f[p]),m.addText(i)),l=e.indexOf(f[p])+f[p].length,e=e.substring(l);e&&(i=new webim.Msg.Elem.Text(e),m.addText(i))}webim.sendMsg(m,function(e){selType==webim.SESSION_TYPE.C2C&&showMsg(m),webim.Log.info("发消息成功"),$("#video-discuss-form .voteCon").show(),$("#video-discuss-form .video-discuss-button").hide(),document.activeElement.blur(),$.ajax({type:"post",url:tourl,data:JSON.stringify({msg:JSON.stringify(m),fromaccount:loginInfo.identifierNick,topicid:selToID}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(){}}),$("#send_msg_text").val(""),hideDiscussForm(),showDiscussTool(),hideDiscussEmotion()},function(e){webim.Log.error("发消息失败:"+e.ErrorInfo),window.wxc.xcConfirm("发消息失败!",window.wxc.xcConfirm.typeEnum)})}}}else 1==accountMode?(webim.Tool.setCookie("accountType",loginInfo.accountType,86400),tlsLogin()):(window.wxc.xcConfirm("请填写帐号和票据",window.wxc.xcConfirm.typeEnum),$("#login_dialog").show())}function sendGroupLoveMsg(){var e,t,o,n,i;loginInfo.identifier?selToID?(selSess=selSess||new webim.Session(selType,selToID,selToID,selSessHeadUrl,Math.round((new Date).getTime()/1e3)),e=Math.round(4294967296*Math.random()),t=Math.round((new Date).getTime()/1e3),o=webim.GROUP_MSG_SUB_TYPE.LOVEMSG,n=new webim.Msg(selSess,!0,-1,e,t,loginInfo.identifier,o,loginInfo.identifierNick),i=new webim.Msg.Elem.Text(" 点了一个赞哦"),n.addText(i),webim.sendMsg(n,function(e){selType==webim.SESSION_TYPE.C2C&&showMsg(n),$.ajax({type:"get",url:zanUrl,data:{topic_id:$("#voteCount").attr("data-topicid")},dataType:"json",success:function(){}}),webim.Log.info("点赞成功")},function(e){webim.Log.error("发送点赞消息失败:"+e.ErrorInfo),window.wxc.xcConfirm("发送点赞消息失败",window.wxc.xcConfirm.typeEnum)})):alert("您还没有进入房间，暂不能点赞"):1==accountMode?(webim.Tool.setCookie("accountType",loginInfo.accountType,86400),tlsLogin()):(alert("请填写帐号和票据"),$("#login_dialog").show())}function hideDiscussForm(){$(".video-discuss-form").show()}function showDiscussForm(){$(".video-discuss-form").show()}function hideDiscussTool(){$(".video-discuss-tool").hide()}function showDiscussTool(){$(".video-discuss-tool").hide()}function hideDiscussEmotion(){$(".video-discuss-emotion").hide()}function showDiscussEmotion(){$(".video-discuss-emotion").show()}function showLoveMsgAnimation(){var e=$("#voteCount").html();$("#voteCount").html(parseInt(e)+1)}function initEmotionUL(){for(var e in webim.Emotions){var t=$("<img>").attr({id:webim.Emotions[e][0],src:webim.Emotions[e][1],style:"cursor:pointer;"}).click(function(){selectEmotionImg(this)});$("<li>").append(t).appendTo($("#emotionUL"))}}function showEmotionDialog(){openEmotionFlag?(openEmotionFlag=!1,hideDiscussEmotion()):(openEmotionFlag=!0,showDiscussEmotion())}function selectEmotionImg(e){$("#send_msg_text").val($("#send_msg_text").val()+e.id)}function quitBigGroup(){var e={GroupId:avChatRoomId};webim.quitBigGroup(e,function(e){webim.Log.info("退群成功"),$("#video_sms_list").find("li").remove()},function(e){alert(e.ErrorInfo)})}function logout(){webim.logout(function(e){webim.Log.info("登出成功"),loginInfo.identifier=null,loginInfo.userSig=null,$("#video_sms_list").find("li").remove();var t=window.location.href,o=t.indexOf("?");0<=o&&(t=t.substring(0,o)),window.location.href=t})}function independentModeLogin(){0!=$("#login_account").val().length?0!=$("#login_pwd").val().length?(loginInfo.identifier=$("#login_account").val(),loginInfo.userSig=$("#login_pwd").val(),$("#login_dialog").hide(),sdkLogin()):alert("请输入UserSig"):alert("请输入帐号")}function add0(e){return e<10?"0"+e:e}function formatDate(e){10==e.toString().length&&(e*=1e3);var t=Date.parse(new Date)-e,o=new Date(e),n=o.getFullYear(),i=o.getMonth()+1,a=o.getDate(),r=o.getHours(),s=o.getMinutes();return t<=36e5?t<=6e4?"刚刚":Math.floor(t/6e4)+"分钟前":n+"."+add0(i)+"."+add0(a)+" "+add0(r)+":"+add0(s)}function onApplyJoinGroupRequestNotify(e){webim.Log.warn("执行 加群申请 回调："+JSON.stringify(e));var t=e.MsgTime,o=e.Operator_Account+"申请加入你的群";showGroupSystemMsg(e.ReportType,"[申请加群]",e.GroupId,e.GroupName,o,t)}function onApplyJoinGroupAcceptNotify(e){webim.Log.warn("执行 申请加群被同意 回调："+JSON.stringify(e));var t=e.Operator_Account+"同意你的加群申请，附言："+e.RemarkInfo;showGroupSystemMsg(e.ReportType,"[申请加群被同意]",e.GroupId,e.GroupName,t,e.MsgTime)}function onApplyJoinGroupRefuseNotify(e){webim.Log.warn("执行 申请加群被拒绝 回调："+JSON.stringify(e));var t=e.Operator_Account+"拒绝了你的加群申请，附言："+e.RemarkInfo;showGroupSystemMsg(e.ReportType,"[申请加群被拒绝]",e.GroupId,e.GroupName,t,e.MsgTime)}function onKickedGroupNotify(e){webim.Log.warn("执行 被踢出群  回调："+JSON.stringify(e));var t="你被管理员"+e.Operator_Account+"踢出该群";showGroupSystemMsg(e.ReportType,"[被踢出群]",e.GroupId,e.GroupName,t,e.MsgTime)}function onDestoryGroupNotify(e){webim.Log.warn("执行 解散群 回调："+JSON.stringify(e));var t="群主"+e.Operator_Account+"已解散该群";showGroupSystemMsg(e.ReportType,"[群被解散]",e.GroupId,e.GroupName,t,e.MsgTime)}function onCreateGroupNotify(e){webim.Log.warn("执行 创建群 回调："+JSON.stringify(e));showGroupSystemMsg(e.ReportType,"[创建群]",e.GroupId,e.GroupName,"你创建了该群",e.MsgTime)}function onInvitedJoinGroupNotify(e){webim.Log.warn("执行 被邀请加群  回调: "+JSON.stringify(e));var t="你被管理员"+e.Operator_Account+"邀请加入该群";showGroupSystemMsg(e.ReportType,"[被邀请加群]",e.GroupId,e.GroupName,t,e.MsgTime)}function onQuitGroupNotify(e){webim.Log.warn("执行 主动退群  回调： "+JSON.stringify(e));showGroupSystemMsg(e.ReportType,"[主动退群]",e.GroupId,e.GroupName,"你退出了该群",e.MsgTime)}function onSetedGroupAdminNotify(e){webim.Log.warn("执行 被设置为管理员  回调："+JSON.stringify(e));var t="你被群主"+e.Operator_Account+"设置为管理员";showGroupSystemMsg(e.ReportType,"[被设置为管理员]",e.GroupId,e.GroupName,t,e.MsgTime)}function onCanceledGroupAdminNotify(e){webim.Log.warn("执行 被取消管理员 回调："+JSON.stringify(e));var t="你被群主"+e.Operator_Account+"取消了管理员资格";showGroupSystemMsg(e.ReportType,"[被取消管理员]",e.GroupId,e.GroupName,t,e.MsgTime)}function onRevokeGroupNotify(e){webim.Log.warn("执行 群被回收 回调："+JSON.stringify(e));showGroupSystemMsg(e.ReportType,"[群被回收]",e.GroupId,e.GroupName,"该群已被回收",e.MsgTime)}function onCustomGroupNotify(e){webim.Log.warn("执行 用户自定义系统消息 回调："+JSON.stringify(e));var t=e.UserDefinedField;showGroupSystemMsg(e.ReportType,"[用户自定义系统消息]",e.GroupId,e.GroupName,t,e.MsgTime)}function onGroupInfoChangeNotify(e){webim.Log.warn("执行 群资料变化 回调： "+JSON.stringify(e));var t=e.GroupId,o=(e.GroupFaceUrl,e.GroupName);e.OwnerAccount,e.GroupNotification,e.GroupIntroduction;o&&webim.Log.warn("群id="+t+"的新名称为："+o)}function showGroupSystemMsg(e,t,o,n,i,a){var r="收到一条群系统消息: type="+e+", typeCh="+t+",群ID="+o+", 群名称="+n+", 内容="+i+", 时间="+webim.Tool.formatTimeStamp(a);webim.Log.warn(r),alert(r)}!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(ae){!function(){var f,G,n,i,s,a,g,R,H,x,p,c,l,d,u,m,h,w,v,b,_,S,E,y,T,C,M,I,U,r,O,k,B,L,Y,A,P,D,N,F,W,z,j,J,$,X,q,V,Q,K,o,Z,ee,te,oe,ne,ie,e="function"==typeof define&&define.amd,t="undefined"!=typeof module&&module.exports;document.location.protocol;e||(t?require("jquery-mousewheel")(ae):ae.event.special.mousewheel||ae("head").append()),f="mCustomScrollbar",G="mCS",n=".mCustomScrollbar",i={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},s=0,a={},g=window.attachEvent&&!window.addEventListener?1:0,R=!1,x=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],p={init:function(r){var r=ae.extend(!0,{},i,r),e=c.call(this);if(r.live){var t=r.liveSelector||this.selector||n,o=ae(t);if("off"===r.live)return void d(t);a[t]=setTimeout(function(){o.mCustomScrollbar(r),"once"===r.live&&o.length&&d(t)},500)}else d(t);return r.setWidth=r.set_width?r.set_width:r.setWidth,r.setHeight=r.set_height?r.set_height:r.setHeight,r.axis=r.horizontalScroll?"x":u(r.axis),r.scrollInertia=0<r.scrollInertia&&r.scrollInertia<17?17:r.scrollInertia,"object"!==_typeof(r.mouseWheel)&&1==r.mouseWheel&&(r.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),r.mouseWheel.scrollAmount=r.mouseWheelPixels?r.mouseWheelPixels:r.mouseWheel.scrollAmount,r.mouseWheel.normalizeDelta=r.advanced.normalizeMouseWheelDelta?r.advanced.normalizeMouseWheelDelta:r.mouseWheel.normalizeDelta,r.scrollButtons.scrollType=m(r.scrollButtons.scrollType),l(r),ae(e).each(function(){var e,t,o,n,i,a=ae(this);a.data(G)||(a.data(G,{idx:++s,opt:r,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:a.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}}),t=(e=a.data(G)).opt,o=a.data("mcs-axis"),n=a.data("mcs-scrollbar-position"),i=a.data("mcs-theme"),o&&(t.axis=o),n&&(t.scrollbarPosition=n),i&&(t.theme=i,l(t)),h.call(this),e&&t.callbacks.onCreate&&"function"==typeof t.callbacks.onCreate&&t.callbacks.onCreate.call(this),ae("#mCSB_"+e.idx+"_container img:not(."+x[2]+")").addClass(x[2]),p.update.call(null,a))})},update:function(e,s){var t=e||c.call(this);return ae(t).each(function(){var e=ae(this);if(e.data(G)){var t=e.data(G),o=t.opt,n=ae("#mCSB_"+t.idx+"_container"),i=ae("#mCSB_"+t.idx),a=[ae("#mCSB_"+t.idx+"_dragger_vertical"),ae("#mCSB_"+t.idx+"_dragger_horizontal")];if(!n.length)return;t.tweenRunning&&q(e),s&&t&&o.callbacks.onBeforeUpdate&&"function"==typeof o.callbacks.onBeforeUpdate&&o.callbacks.onBeforeUpdate.call(this),e.hasClass(x[3])&&e.removeClass(x[3]),e.hasClass(x[4])&&e.removeClass(x[4]),i.css("max-height","none"),i.height()!==e.height()&&i.css("max-height",e.height()),v.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||n.css("width",w(n)),t.overflowed=y.call(this),I.call(this),o.autoDraggerLength&&_.call(this),S.call(this),C.call(this);var r=[Math.abs(n[0].offsetTop),Math.abs(n[0].offsetLeft)];"x"!==o.axis&&(t.overflowed[0]?a[0].height()>a[0].parent().height()?T.call(this):(V(e,r[0].toString(),{dir:"y",dur:0,overwrite:"none"}),t.contentReset.y=null):(T.call(this),"y"===o.axis?M.call(this):"yx"===o.axis&&t.overflowed[1]&&V(e,r[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(t.overflowed[1]?a[1].width()>a[1].parent().width()?T.call(this):(V(e,r[1].toString(),{dir:"x",dur:0,overwrite:"none"}),t.contentReset.x=null):(T.call(this),"x"===o.axis?M.call(this):"yx"===o.axis&&t.overflowed[0]&&V(e,r[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),s&&t&&(2===s&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===s&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),X.call(this)}})},scrollTo:function(s,l){if(void 0!==s&&null!=s){var e=c.call(this);return ae(e).each(function(){var e,t,o,n,i,a,r=ae(this);r.data(G)&&(e=r.data(G),o={trigger:"external",scrollInertia:(t=e.opt).scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n=ae.extend(!0,{},o,l),i=J.call(this,s),a=0<n.scrollInertia&&n.scrollInertia<17?17:n.scrollInertia,i[0]=$.call(this,i[0],"y"),i[1]=$.call(this,i[1],"x"),n.moveDragger&&(i[0]*=e.scrollRatio.y,i[1]*=e.scrollRatio.x),n.dur=ie()?0:a,setTimeout(function(){null!==i[0]&&void 0!==i[0]&&"x"!==t.axis&&e.overflowed[0]&&(n.dir="y",n.overwrite="all",V(r,i[0].toString(),n)),null!==i[1]&&void 0!==i[1]&&"y"!==t.axis&&e.overflowed[1]&&(n.dir="x",n.overwrite="none",V(r,i[1].toString(),n))},n.timeout))})}},stop:function(){var e=c.call(this);return ae(e).each(function(){var e=ae(this);e.data(G)&&q(e)})},disable:function(t){var e=c.call(this);return ae(e).each(function(){var e=ae(this);e.data(G)&&(e.data(G),X.call(this,"remove"),M.call(this),t&&T.call(this),I.call(this,!0),e.addClass(x[3]))})},destroy:function(){var r=c.call(this);return ae(r).each(function(){var e,t,o,n,i,a=ae(this);a.data(G)&&(t=(e=a.data(G)).opt,o=ae("#mCSB_"+e.idx),n=ae("#mCSB_"+e.idx+"_container"),i=ae(".mCSB_"+e.idx+"_scrollbar"),t.live&&d(t.liveSelector||ae(r).selector),X.call(this,"remove"),M.call(this),T.call(this),a.removeData(G),Z(this,"mcs"),i.remove(),n.find("img."+x[2]).removeClass(x[2]),o.replaceWith(n.contents()),a.removeClass(f+" _"+G+"_"+e.idx+" "+x[6]+" "+x[7]+" "+x[5]+" "+x[3]).addClass(x[4]))})}},c=function(){return"object"!==_typeof(ae(this))||ae(this).length<1?n:this},l=function(e){e.autoDraggerLength=!(-1<ae.inArray(e.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"]))&&e.autoDraggerLength,e.autoExpandScrollbar=!(-1<ae.inArray(e.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"]))&&e.autoExpandScrollbar,e.scrollButtons.enable=!(-1<ae.inArray(e.theme,["minimal","minimal-dark"]))&&e.scrollButtons.enable,e.autoHideScrollbar=-1<ae.inArray(e.theme,["minimal","minimal-dark"])||e.autoHideScrollbar,e.scrollbarPosition=-1<ae.inArray(e.theme,["minimal","minimal-dark"])?"outside":e.scrollbarPosition},d=function(e){a[e]&&(clearTimeout(a[e]),Z(a,e))},u=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},m=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},h=function(){var e=ae(this),t=e.data(G),o=t.opt,n=o.autoExpandScrollbar?" "+x[1]+"_expand":"",i=["<div id='mCSB_"+t.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+t.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+n+"'><div class='"+x[12]+"'><div id='mCSB_"+t.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+t.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+t.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+n+"'><div class='"+x[12]+"'><div id='mCSB_"+t.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],a="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",r="yx"===o.axis?i[0]+i[1]:"x"===o.axis?i[1]:i[0],s="yx"===o.axis?"<div id='mCSB_"+t.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",l=o.autoHideScrollbar?" "+x[6]:"",c="x"!==o.axis&&"rtl"===t.langDir?" "+x[7]:"";o.setWidth&&e.css("width",o.setWidth),o.setHeight&&e.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===t.langDir?"989999px":o.setLeft,e.addClass(f+" _"+G+"_"+t.idx+l+c).wrapInner("<div id='mCSB_"+t.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+a+"'><div id='mCSB_"+t.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir='"+t.langDir+"' /></div>");var d=ae("#mCSB_"+t.idx),u=ae("#mCSB_"+t.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||u.css("width",w(u)),"outside"===o.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),d.addClass("mCSB_outside").after(r)):(d.addClass("mCSB_inside").append(r),u.wrap(s)),b.call(this);var m=[ae("#mCSB_"+t.idx+"_dragger_vertical"),ae("#mCSB_"+t.idx+"_dragger_horizontal")];m[0].css("min-height",m[0].height()),m[1].css("min-width",m[1].width())},w=function(e){var t=[e[0].scrollWidth,Math.max.apply(Math,e.children().map(function(){return ae(this).outerWidth(!0)}).get())],o=e.parent().width();return o<t[0]?t[0]:o<t[1]?t[1]:"100%"},v=function(){var e,t=ae(this).data(G),o=t.opt,n=ae("#mCSB_"+t.idx+"_container");o.advanced.autoExpandHorizontalScroll&&"y"!==o.axis&&(n.css({width:"auto","min-width":0,"overflow-x":"scroll"}),e=Math.ceil(n[0].scrollWidth),3===o.advanced.autoExpandHorizontalScroll||2!==o.advanced.autoExpandHorizontalScroll&&e>n.parent().width()?n.css({width:e,"min-width":"100%","overflow-x":"inherit"}):n.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(n[0].getBoundingClientRect().right+.4)-Math.floor(n[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap())},b=function(){var e=ae(this).data(G),t=e.opt,o=ae(".mCSB_"+e.idx+"_scrollbar:first"),n=oe(t.scrollButtons.tabindex)?"tabindex='"+t.scrollButtons.tabindex+"'":"",i=["<a href='#' class='"+x[13]+"' "+n+" />","<a href='#' class='"+x[14]+"' "+n+" />","<a href='#' class='"+x[15]+"' "+n+" />","<a href='#' class='"+x[16]+"' "+n+" />"],a=["x"===t.axis?i[2]:i[0],"x"===t.axis?i[3]:i[1],i[2],i[3]];t.scrollButtons.enable&&o.prepend(a[0]).append(a[1]).next(".mCSB_scrollTools").prepend(a[2]).append(a[3])},_=function(){var e=ae(this).data(G),t=ae("#mCSB_"+e.idx),o=ae("#mCSB_"+e.idx+"_container"),n=[ae("#mCSB_"+e.idx+"_dragger_vertical"),ae("#mCSB_"+e.idx+"_dragger_horizontal")],i=[t.height()/o.outerHeight(!1),t.width()/o.outerWidth(!1)],a=[parseInt(n[0].css("min-height")),Math.round(i[0]*n[0].parent().height()),parseInt(n[1].css("min-width")),Math.round(i[1]*n[1].parent().width())],r=g&&a[1]<a[0]?a[0]:a[1],s=g&&a[3]<a[2]?a[2]:a[3];n[0].css({height:r,"max-height":n[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":a[0]+"px"}),n[1].css({width:s,"max-width":n[1].parent().width()-10})},S=function(){var e=ae(this).data(G),t=ae("#mCSB_"+e.idx),o=ae("#mCSB_"+e.idx+"_container"),n=[ae("#mCSB_"+e.idx+"_dragger_vertical"),ae("#mCSB_"+e.idx+"_dragger_horizontal")],i=[o.outerHeight(!1)-t.height(),o.outerWidth(!1)-t.width()],a=[i[0]/(n[0].parent().height()-n[0].height()),i[1]/(n[1].parent().width()-n[1].width())];e.scrollRatio={y:a[0],x:a[1]}},E=function(e,t,o){var n=o?x[0]+"_expanded":"",i=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(x[0]+" "+n),i.toggleClass(x[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(x[0]),i.removeClass(x[1])):(e.addClass(x[0]),i.addClass(x[1])))},y=function(){var e=ae(this).data(G),t=ae("#mCSB_"+e.idx),o=ae("#mCSB_"+e.idx+"_container"),n=null==e.overflowed?o.height():o.outerHeight(!1),i=null==e.overflowed?o.width():o.outerWidth(!1),a=o[0].scrollHeight,r=o[0].scrollWidth;return n<a&&(n=a),i<r&&(i=r),[n>t.height(),i>t.width()]},T=function(){var e,t=ae(this),o=t.data(G),n=o.opt,i=ae("#mCSB_"+o.idx),a=ae("#mCSB_"+o.idx+"_container"),r=[ae("#mCSB_"+o.idx+"_dragger_vertical"),ae("#mCSB_"+o.idx+"_dragger_horizontal")];q(t),("x"!==n.axis&&!o.overflowed[0]||"y"===n.axis&&o.overflowed[0])&&(r[0].add(a).css("top",0),V(t,"_resetY")),("y"!==n.axis&&!o.overflowed[1]||"x"===n.axis&&o.overflowed[1])&&(e=dx=0,"rtl"===o.langDir&&(e=i.width()-a.outerWidth(!1),dx=Math.abs(e/o.scrollRatio.x)),a.css("left",e),r[1].css("left",dx),V(t,"_resetX"))},C=function(){var t,o=ae(this),e=o.data(G),n=e.opt;e.bindEvents||(r.call(this),n.contentTouchScroll&&O.call(this),k.call(this),n.mouseWheel.enable&&function e(){t=setTimeout(function(){ae.event.special.mousewheel?(clearTimeout(t),B.call(o[0])):e()},100)}(),D.call(this),F.call(this),n.advanced.autoScrollOnFocus&&N.call(this),n.scrollButtons.enable&&W.call(this),n.keyboard.enable&&z.call(this),e.bindEvents=!0)},M=function(){var e=ae(this),t=e.data(G),o=t.opt,n="mCS_"+t.idx,i=".mCSB_"+t.idx+"_scrollbar",a=ae("#mCSB_"+t.idx+",#mCSB_"+t.idx+"_container,#mCSB_"+t.idx+"_container_wrapper,"+i+" ."+x[12]+",#mCSB_"+t.idx+"_dragger_vertical,#mCSB_"+t.idx+"_dragger_horizontal,"+i+">a"),r=ae("#mCSB_"+t.idx+"_container");o.advanced.releaseDraggableSelectors&&a.add(ae(o.advanced.releaseDraggableSelectors)),o.advanced.extraDraggableSelectors&&a.add(ae(o.advanced.extraDraggableSelectors)),t.bindEvents&&(ae(document).add(ae(!Y()||top.document)).unbind("."+n),a.each(function(){ae(this).unbind("."+n)}),clearTimeout(e[0]._focusTimeout),Z(e[0],"_focusTimeout"),clearTimeout(t.sequential.step),Z(t.sequential,"step"),clearTimeout(r[0].onCompleteTimeout),Z(r[0],"onCompleteTimeout"),t.bindEvents=!1)},I=function(e){var t=ae(this),o=t.data(G),n=o.opt,i=ae("#mCSB_"+o.idx+"_container_wrapper"),a=i.length?i:ae("#mCSB_"+o.idx+"_container"),r=[ae("#mCSB_"+o.idx+"_scrollbar_vertical"),ae("#mCSB_"+o.idx+"_scrollbar_horizontal")],s=[r[0].find(".mCSB_dragger"),r[1].find(".mCSB_dragger")];"x"!==n.axis&&(o.overflowed[0]&&!e?(r[0].add(s[0]).add(r[0].children("a")).css("display","block"),a.removeClass(x[8]+" "+x[10])):(n.alwaysShowScrollbar?(2!==n.alwaysShowScrollbar&&s[0].css("display","none"),a.removeClass(x[10])):(r[0].css("display","none"),a.addClass(x[10])),a.addClass(x[8]))),"y"!==n.axis&&(o.overflowed[1]&&!e?(r[1].add(s[1]).add(r[1].children("a")).css("display","block"),a.removeClass(x[9]+" "+x[11])):(n.alwaysShowScrollbar?(2!==n.alwaysShowScrollbar&&s[1].css("display","none"),a.removeClass(x[11])):(r[1].css("display","none"),a.addClass(x[11])),a.addClass(x[9]))),o.overflowed[0]||o.overflowed[1]?t.removeClass(x[5]):t.addClass(x[5])},U=function(e){var t=e.type,o=e.target.ownerDocument!==document&&null!==frameElement?[ae(frameElement).offset().top,ae(frameElement).offset().left]:null,n=Y()&&e.target.ownerDocument!==top.document&&null!==frameElement?[ae(e.view.frameElement).offset().top,ae(e.view.frameElement).offset().left]:[0,0];switch(t){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return o?[e.originalEvent.pageY-o[0]+n[0],e.originalEvent.pageX-o[1]+n[1],!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var i=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],a=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[i.screenY,i.screenX,1<a]:[i.pageY,i.pageX,1<a];default:return o?[e.pageY-o[0]+n[0],e.pageX-o[1]+n[1],!1]:[e.pageY,e.pageX,!1]}},r=function(){var r,s,l,c=ae(this),d=c.data(G),u=d.opt,e="mCS_"+d.idx,m=["mCSB_"+d.idx+"_dragger_vertical","mCSB_"+d.idx+"_dragger_horizontal"],f=ae("#mCSB_"+d.idx+"_container"),t=ae("#"+m[0]+",#"+m[1]),o=u.advanced.releaseDraggableSelectors?t.add(ae(u.advanced.releaseDraggableSelectors)):t,n=u.advanced.extraDraggableSelectors?ae(!Y()||top.document).add(ae(u.advanced.extraDraggableSelectors)):ae(!Y()||top.document);function i(e,t,o,n){var i,a;f[0].idleTimer=u.scrollInertia<233?250:0,a=r.attr("id")===m[1]?(i="x",(r[0].offsetLeft-t+n)*d.scrollRatio.x):(i="y",(r[0].offsetTop-e+o)*d.scrollRatio.y),V(c,a.toString(),{dir:i,drag:!0})}t.bind("contextmenu."+e,function(e){e.preventDefault()}).bind("mousedown."+e+" touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,function(e){var t,o,n,i,a;e.stopImmediatePropagation(),e.preventDefault(),ee(e)&&(R=!0,g&&(document.onselectstart=function(){return!1}),A.call(f,!1),q(c),t=(r=ae(this)).offset(),o=U(e)[0]-t.top,n=U(e)[1]-t.left,i=r.height()+t.top,a=r.width()+t.left,o<i&&0<o&&n<a&&0<n&&(s=o,l=n),E(r,"active",u.autoExpandScrollbar))}).bind("touchmove."+e,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=r.offset(),o=U(e)[0]-t.top,n=U(e)[1]-t.left;i(s,l,o,n)}),ae(document).add(n).bind("mousemove."+e+" pointermove."+e+" MSPointerMove."+e,function(e){if(r){var t=r.offset(),o=U(e)[0]-t.top,n=U(e)[1]-t.left;if(s===o&&l===n)return;i(s,l,o,n)}}).add(o).bind("mouseup."+e+" touchend."+e+" pointerup."+e+" MSPointerUp."+e,function(e){r&&(E(r,"active",u.autoExpandScrollbar),r=null),R=!1,g&&(document.onselectstart=null),A.call(f,!0)})},O=function(){var d,c,u,m,f,p,h,g,w,v,b,_,x,S,y=ae(this),T=y.data(G),C=T.opt,e="mCS_"+T.idx,M=ae("#mCSB_"+T.idx),E=ae("#mCSB_"+T.idx+"_container"),I=[ae("#mCSB_"+T.idx+"_dragger_vertical"),ae("#mCSB_"+T.idx+"_dragger_horizontal")],O=[],k=[],B=0,L="yx"===C.axis?"none":"all",A=[],t=E.find("iframe"),o=["touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,"touchmove."+e+" pointermove."+e+" MSPointerMove."+e,"touchend."+e+" pointerup."+e+" MSPointerUp."+e],P=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;function n(e){var t;!te(e)||R||U(e)[2]?H=0:(S=x=0,d=H=1,y.removeClass("mCS_touch_action"),t=E.offset(),c=U(e)[0]-t.top,u=U(e)[1]-t.left,A=[U(e)[0],U(e)[1]])}function i(e){var t,o,n,i,a,r,s,l;!te(e)||R||U(e)[2]||(C.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),S&&!x||d&&(h=K(),t=M.offset(),o=U(e)[0]-t.top,n=U(e)[1]-t.left,i="mcsLinearOut",O.push(o),k.push(n),A[2]=Math.abs(U(e)[0]-A[0]),A[3]=Math.abs(U(e)[1]-A[1]),T.overflowed[0]&&(a=I[0].parent().height()-I[0].height(),r=0<c-o&&o-c>-(a*T.scrollRatio.y)&&(2*A[3]<A[2]||"yx"===C.axis)),T.overflowed[1]&&(s=I[1].parent().width()-I[1].width(),l=0<u-n&&n-u>-(s*T.scrollRatio.x)&&(2*A[2]<A[3]||"yx"===C.axis)),r||l?(P||e.preventDefault(),x=1):(S=1,y.addClass("mCS_touch_action")),P&&e.preventDefault(),b="yx"===C.axis?[c-o,u-n]:"x"===C.axis?[null,u-n]:[c-o,null],E[0].idleTimer=250,T.overflowed[0]&&N(b[0],B,i,"y","all",!0),T.overflowed[1]&&N(b[1],B,i,"x",L,!0)))}function a(e){var t;!te(e)||R||U(e)[2]?H=0:(H=1,e.stopImmediatePropagation(),q(y),p=K(),t=M.offset(),m=U(e)[0]-t.top,f=U(e)[1]-t.left,O=[],k=[])}function r(e){var t,o,n,i,a,r,s,l,c;!te(e)||R||U(e)[2]||(d=0,e.stopImmediatePropagation(),S=x=0,g=K(),t=M.offset(),o=U(e)[0]-t.top,n=U(e)[1]-t.left,30<g-h||(i="mcsEaseOut",r=(a=(v=1e3/(g-p))<2.5)?[O[O.length-2],k[k.length-2]]:[0,0],w=a?[o-r[0],n-r[1]]:[o-m,n-f],s=[Math.abs(w[0]),Math.abs(w[1])],v=a?[Math.abs(w[0]/4),Math.abs(w[1]/4)]:[v,v],l=[Math.abs(E[0].offsetTop)-w[0]*D(s[0]/v[0],v[0]),Math.abs(E[0].offsetLeft)-w[1]*D(s[1]/v[1],v[1])],b="yx"===C.axis?[l[0],l[1]]:"x"===C.axis?[null,l[1]]:[l[0],null],_=[4*s[0]+C.scrollInertia,4*s[1]+C.scrollInertia],c=parseInt(C.contentTouchScroll)||0,b[0]=c<s[0]?b[0]:0,b[1]=c<s[1]?b[1]:0,T.overflowed[0]&&N(b[0],_[0],i,"y",L,!1),T.overflowed[1]&&N(b[1],_[1],i,"x",L,!1)))}function D(e,t){var o=[1.5*t,2*t,t/1.5,t/2];return 90<e?4<t?o[0]:o[3]:60<e?3<t?o[3]:o[2]:30<e?8<t?o[1]:6<t?o[0]:4<t?t:o[2]:8<t?t:o[3]}function N(e,t,o,n,i,a){e&&V(y,e.toString(),{dur:t,scrollEasing:o,dir:n,overwrite:i,drag:a})}E.bind(o[0],function(e){n(e)}).bind(o[1],function(e){i(e)}),M.bind(o[0],function(e){a(e)}).bind(o[2],function(e){r(e)}),t.length&&t.each(function(){ae(this).bind("load",function(){Y(this)&&ae(this.contentDocument||this.contentWindow.document).bind(o[0],function(e){n(e),a(e)}).bind(o[1],function(e){i(e)}).bind(o[2],function(e){r(e)})})})},k=function(){var i,n=ae(this),a=n.data(G),r=a.opt,s=a.sequential,e="mCS_"+a.idx,l=ae("#mCSB_"+a.idx+"_container"),c=l.parent();function d(e,t,o){s.type=o&&i?"stepped":"stepless",s.scrollAmount=10,j(n,e,t,"mcsLinearOut",o?60:null)}l.bind("mousedown."+e,function(e){H||i||(i=1,R=!0)}).add(document).bind("mousemove."+e,function(e){var t,o,n;!H&&i&&(window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&document.selection.createRange().text)&&(t=l.offset(),o=U(e)[0]-t.top+l[0].offsetTop,n=U(e)[1]-t.left+l[0].offsetLeft,0<o&&o<c.height()&&0<n&&n<c.width()?s.step&&d("off",null,"stepped"):("x"!==r.axis&&a.overflowed[0]&&(o<0?d("on",38):o>c.height()&&d("on",40)),"y"!==r.axis&&a.overflowed[1]&&(n<0?d("on",37):n>c.width()&&d("on",39))))}).bind("mouseup."+e+" dragend."+e,function(e){H||(i&&(i=0,d("off",null)),R=!1)})},B=function(){var u,m,f,e,p,h,t;function o(e,t){var o,n,i,a,r,s,l,c,d;q(u),P(u,e.target)||(o="auto"!==f.mouseWheel.deltaFactor?parseInt(f.mouseWheel.deltaFactor):!(g&&e.deltaFactor<100)&&e.deltaFactor||100,n=f.scrollInertia,d="x"===f.axis||"x"===f.mouseWheel.axis?(i="x",a=[Math.round(o*m.scrollRatio.x),parseInt(f.mouseWheel.scrollAmount)],r="auto"!==f.mouseWheel.scrollAmount?a[1]:a[0]>=p.width()?.9*p.width():a[0],s=Math.abs(ae("#mCSB_"+m.idx+"_container")[0].offsetLeft),l=h[1][0].offsetLeft,c=h[1].parent().width()-h[1].width(),"y"===f.mouseWheel.axis?e.deltaY||t:e.deltaX):(i="y",a=[Math.round(o*m.scrollRatio.y),parseInt(f.mouseWheel.scrollAmount)],r="auto"!==f.mouseWheel.scrollAmount?a[1]:a[0]>=p.height()?.9*p.height():a[0],s=Math.abs(ae("#mCSB_"+m.idx+"_container")[0].offsetTop),l=h[0][0].offsetTop,c=h[0].parent().height()-h[0].height(),e.deltaY||t),"y"===i&&!m.overflowed[0]||"x"===i&&!m.overflowed[1]||((f.mouseWheel.invert||e.webkitDirectionInvertedFromDevice)&&(d=-d),f.mouseWheel.normalizeDelta&&(d=d<0?-1:1),(0<d&&0!==l||d<0&&l!==c||f.mouseWheel.preventDefault)&&(e.stopImmediatePropagation(),e.preventDefault()),e.deltaFactor<5&&!f.mouseWheel.normalizeDelta&&(r=e.deltaFactor,n=17),V(u,(s-d*r).toString(),{dir:i,dur:n})))}ae(this).data(G)&&(u=ae(this),m=u.data(G),f=m.opt,e="mCS_"+m.idx,p=ae("#mCSB_"+m.idx),h=[ae("#mCSB_"+m.idx+"_dragger_vertical"),ae("#mCSB_"+m.idx+"_dragger_horizontal")],(t=ae("#mCSB_"+m.idx+"_container").find("iframe")).length&&t.each(function(){ae(this).bind("load",function(){Y(this)&&ae(this.contentDocument||this.contentWindow.document).bind("mousewheel."+e,function(e,t){o(e,t)})})}),p.bind("mousewheel."+e,function(e,t){o(e,t)}))},L=new Object,Y=function(e){var t=!1,o=!1,n=null;if(void 0===e?o="#empty":void 0!==ae(e).attr("id")&&(o=ae(e).attr("id")),!1!==o&&void 0!==L[o])return L[o];if(e){try{n=(e.contentDocument||e.contentWindow.document).body.innerHTML}catch(e){}t=null!==n}else{try{n=top.document.body.innerHTML}catch(e){}t=null!==n}return!1!==o&&(L[o]=t),t},A=function(e){var t,o=this.find("iframe");o.length&&(t=e?"auto":"none",o.css("pointer-events",t))},P=function(e,t){var o=t.nodeName.toLowerCase(),n=e.data(G).opt.mouseWheel.disableOver;return-1<ae.inArray(o,n)&&!(-1<ae.inArray(o,["select","textarea"])&&!ae(t).is(":focus"))},D=function(){var r,s=ae(this),l=s.data(G),e="mCS_"+l.idx,c=ae("#mCSB_"+l.idx+"_container"),d=c.parent();ae(".mCSB_"+l.idx+"_scrollbar ."+x[12]).bind("mousedown."+e+" touchstart."+e+" pointerdown."+e+" MSPointerDown."+e,function(e){R=!0,ae(e.target).hasClass("mCSB_dragger")||(r=1)}).bind("touchend."+e+" pointerup."+e+" MSPointerUp."+e,function(e){R=!1}).bind("click."+e,function(e){if(r&&(r=0,ae(e.target).hasClass(x[12])||ae(e.target).hasClass("mCSB_draggerRail"))){q(s);var t=ae(this),o=t.find(".mCSB_dragger");if(0<t.parent(".mCSB_scrollTools_horizontal").length){if(!l.overflowed[1])return;var n="x",i=e.pageX>o.offset().left?-1:1,a=Math.abs(c[0].offsetLeft)-i*(.9*d.width())}else{if(!l.overflowed[0])return;n="y",i=e.pageY>o.offset().top?-1:1,a=Math.abs(c[0].offsetTop)-i*(.9*d.height())}V(s,a.toString(),{dir:n,scrollEasing:"mcsEaseInOut"})}})},N=function(){var a=ae(this),e=a.data(G),r=e.opt,t="mCS_"+e.idx,s=ae("#mCSB_"+e.idx+"_container"),l=s.parent();s.bind("focusin."+t,function(e){var i=ae(document.activeElement),t=s.find(".mCustomScrollBox").length;i.is(r.advanced.autoScrollOnFocus)&&(q(a),clearTimeout(a[0]._focusTimeout),a[0]._focusTimer=t?17*t:0,a[0]._focusTimeout=setTimeout(function(){var e=[ne(i)[0],ne(i)[1]],t=[s[0].offsetTop,s[0].offsetLeft],o=[0<=t[0]+e[0]&&t[0]+e[0]<l.height()-i.outerHeight(!1),0<=t[1]+e[1]&&t[0]+e[1]<l.width()-i.outerWidth(!1)],n="yx"!==r.axis||o[0]||o[1]?"all":"none";"x"===r.axis||o[0]||V(a,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:n,dur:0}),"y"===r.axis||o[1]||V(a,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:n,dur:0})},a[0]._focusTimer))})},F=function(){var t=ae(this).data(G),e="mCS_"+t.idx,o=ae("#mCSB_"+t.idx+"_container").parent();o.bind("scroll."+e,function(e){0===o.scrollTop()&&0===o.scrollLeft()||ae(".mCSB_"+t.idx+"_scrollbar").css("visibility","hidden")})},W=function(){var n=ae(this),i=n.data(G),a=i.opt,r=i.sequential,e="mCS_"+i.idx,t=".mCSB_"+i.idx+"_scrollbar";ae(t+">a").bind("contextmenu."+e,function(e){e.preventDefault()}).bind("mousedown."+e+" touchstart."+e+" pointerdown."+e+" MSPointerDown."+e+" mouseup."+e+" touchend."+e+" pointerup."+e+" MSPointerUp."+e+" mouseout."+e+" pointerout."+e+" MSPointerOut."+e+" click."+e,function(e){if(e.preventDefault(),ee(e)){var t=ae(this).attr("class");switch(r.type=a.scrollButtons.scrollType,e.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===r.type)return;R=!0,i.tweenRunning=!1,o("on",t);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===r.type)return;R=!1,r.dir&&o("off",t);break;case"click":if("stepped"!==r.type||i.tweenRunning)return;o("on",t)}}function o(e,t){r.scrollAmount=a.scrollButtons.scrollAmount,j(n,e,t)}})},z=function(){var s=ae(this),l=s.data(G),c=l.opt,d=l.sequential,e="mCS_"+l.idx,t=ae("#mCSB_"+l.idx),u=ae("#mCSB_"+l.idx+"_container"),m=u.parent(),f="input,textarea,select,datalist,keygen,[contenteditable='true']",o=u.find("iframe"),n=["blur."+e+" keydown."+e+" keyup."+e];function i(e){switch(e.type){case"blur":l.tweenRunning&&d.dir&&r("off",null);break;case"keydown":case"keyup":var t,o,n,i=e.keyCode?e.keyCode:e.which,a="on";if("x"!==c.axis&&(38===i||40===i)||"y"!==c.axis&&(37===i||39===i)){if((38===i||40===i)&&!l.overflowed[0]||(37===i||39===i)&&!l.overflowed[1])return;"keyup"===e.type&&(a="off"),ae(document.activeElement).is(f)||(e.preventDefault(),e.stopImmediatePropagation(),r(a,i))}else{33===i||34===i?((l.overflowed[0]||l.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type&&(q(s),t=34===i?-1:1,n="x"===c.axis||"yx"===c.axis&&l.overflowed[1]&&!l.overflowed[0]?(o="x",Math.abs(u[0].offsetLeft)-t*(.9*m.width())):(o="y",Math.abs(u[0].offsetTop)-t*(.9*m.height())),V(s,n.toString(),{dir:o,scrollEasing:"mcsEaseInOut"}))):35!==i&&36!==i||ae(document.activeElement).is(f)||((l.overflowed[0]||l.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type&&(n="x"===c.axis||"yx"===c.axis&&l.overflowed[1]&&!l.overflowed[0]?(o="x",35===i?Math.abs(m.width()-u.outerWidth(!1)):0):(o="y",35===i?Math.abs(m.height()-u.outerHeight(!1)):0),V(s,n.toString(),{dir:o,scrollEasing:"mcsEaseInOut"})))}}function r(e,t){d.type=c.keyboard.scrollType,d.scrollAmount=c.keyboard.scrollAmount,"stepped"===d.type&&l.tweenRunning||j(s,e,t)}}o.length&&o.each(function(){ae(this).bind("load",function(){Y(this)&&ae(this.contentDocument||this.contentWindow.document).bind(n[0],function(e){i(e)})})}),t.attr("tabindex","0").bind(n[0],function(e){i(e)})},j=function(u,e,t,m,f){var p=u.data(G),h=p.opt,g=p.sequential,w=ae("#mCSB_"+p.idx+"_container"),o="stepped"===g.type,v=h.scrollInertia<26?26:h.scrollInertia,b=h.scrollInertia<1?17:h.scrollInertia;switch(e){case"on":if(g.dir=[t===x[16]||t===x[15]||39===t||37===t?"x":"y",t===x[13]||t===x[15]||38===t||37===t?-1:1],q(u),oe(t)&&"stepped"===g.type)return;_(o);break;case"off":clearTimeout(g.step),Z(g,"step"),q(u),(o||p.tweenRunning&&g.dir)&&_(!0)}function _(e){h.snapAmount&&(g.scrollAmount=h.snapAmount instanceof Array?"x"===g.dir[0]?h.snapAmount[1]:h.snapAmount[0]:h.snapAmount);var t="stepped"!==g.type,o=f||(e?t?v/1.5:b:1e3/60),n=e?t?7.5:40:2.5,i=[Math.abs(w[0].offsetTop),Math.abs(w[0].offsetLeft)],a=[10<p.scrollRatio.y?10:p.scrollRatio.y,10<p.scrollRatio.x?10:p.scrollRatio.x],r="x"===g.dir[0]?i[1]+g.dir[1]*(a[1]*n):i[0]+g.dir[1]*(a[0]*n),s="x"===g.dir[0]?i[1]+g.dir[1]*parseInt(g.scrollAmount):i[0]+g.dir[1]*parseInt(g.scrollAmount),l="auto"!==g.scrollAmount?s:r,c=m||(e?t?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),d=!!e;e&&o<17&&(l="x"===g.dir[0]?i[1]:i[0]),V(u,l.toString(),{dir:g.dir[0],scrollEasing:c,dur:o,onComplete:d}),e?g.dir=!1:(clearTimeout(g.step),g.step=setTimeout(function(){_()},o))}},J=function(e){var t=ae(this).data(G).opt,o=[];return"function"==typeof e&&(e=e()),e instanceof Array?o=1<e.length?[e[0],e[1]]:"x"===t.axis?[null,e[0]]:[e[0],null]:(o[0]=e.y?e.y:e.x||"x"===t.axis?null:e,o[1]=e.x?e.x:e.y||"y"===t.axis?null:e),"function"==typeof o[0]&&(o[0]=o[0]()),"function"==typeof o[1]&&(o[1]=o[1]()),o},$=function(e,t){if(null!=e&&void 0!==e){var o=ae(this),n=o.data(G),i=n.opt,a=ae("#mCSB_"+n.idx+"_container"),r=a.parent(),s=void 0===e?"undefined":_typeof(e),l="x"===(t=t||("x"===i.axis?"x":"y"))?a.outerWidth(!1)-r.width():a.outerHeight(!1)-r.height(),c="x"===t?a[0].offsetLeft:a[0].offsetTop,d="x"===t?"left":"top";switch(s){case"function":return e();case"object":if(!(m=e.jquery?e:ae(e)).length)return;return"x"===t?ne(m)[1]:ne(m)[0];case"string":case"number":if(oe(e))return Math.abs(e);if(-1!==e.indexOf("%"))return Math.abs(l*parseInt(e)/100);if(-1!==e.indexOf("-="))return Math.abs(c-parseInt(e.split("-=")[1]));if(-1!==e.indexOf("+=")){var u=c+parseInt(e.split("+=")[1]);return 0<=u?0:Math.abs(u)}if(-1!==e.indexOf("px")&&oe(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(r.height()-a.outerHeight(!1));if("right"===e)return Math.abs(r.width()-a.outerWidth(!1));if("first"!==e&&"last"!==e)return ae(e).length?"x"===t?ne(ae(e))[1]:ne(ae(e))[0]:(a.css(d,e),void p.update.call(null,o[0]));var m=a.find(":"+e);return"x"===t?ne(m)[1]:ne(m)[0]}}},X=function(e){var t=ae(this),o=t.data(G),n=o.opt,i=ae("#mCSB_"+o.idx+"_container");if(e)return clearTimeout(i[0].autoUpdate),void Z(i[0],"autoUpdate");function a(e){var t,o,n;ae(e).hasClass(x[2])?s():((t=new Image).onload=(o=t,n=function(){this.onload=null,ae(e).addClass(x[2]),s(2)},function(){return n.apply(o,arguments)}),t.src=e.src)}function r(){!0===n.advanced.updateOnSelectorChange&&(n.advanced.updateOnSelectorChange="*");var e=0,t=i.find(n.advanced.updateOnSelectorChange);return n.advanced.updateOnSelectorChange&&0<t.length&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function s(e){clearTimeout(i[0].autoUpdate),p.update.call(null,t[0],e)}!function e(){clearTimeout(i[0].autoUpdate);if(0===t.parents("html").length)return void(t=null);i[0].autoUpdate=setTimeout(function(){return n.advanced.updateOnSelectorChange&&(o.poll.change.n=r(),o.poll.change.n!==o.poll.change.o)?(o.poll.change.o=o.poll.change.n,void s(3)):n.advanced.updateOnContentResize&&(o.poll.size.n=t[0].scrollHeight+t[0].scrollWidth+i[0].offsetHeight+t[0].offsetHeight+t[0].offsetWidth,o.poll.size.n!==o.poll.size.o)?(o.poll.size.o=o.poll.size.n,void s(1)):!n.advanced.updateOnImageLoad||"auto"===n.advanced.updateOnImageLoad&&"y"===n.axis||(o.poll.img.n=i.find("img").length,o.poll.img.n===o.poll.img.o)?void((n.advanced.updateOnSelectorChange||n.advanced.updateOnContentResize||n.advanced.updateOnImageLoad)&&e()):(o.poll.img.o=o.poll.img.n,void i.find("img").each(function(){a(this)}))},n.advanced.autoUpdateTimeout)}()},q=function(e){var t=e.data(G);ae("#mCSB_"+t.idx+"_container,#mCSB_"+t.idx+"_container_wrapper,#mCSB_"+t.idx+"_dragger_vertical,#mCSB_"+t.idx+"_dragger_horizontal").each(function(){o.call(this)})},V=function(i,e,a){var t,o,n,r,s=i.data(G),l=s.opt,c={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:l.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},d=[(a=ae.extend(c,a)).dur,a.drag?0:a.dur],u=ae("#mCSB_"+s.idx),m=ae("#mCSB_"+s.idx+"_container"),f=m.parent(),p=l.callbacks.onTotalScrollOffset?J.call(i,l.callbacks.onTotalScrollOffset):[0,0],h=l.callbacks.onTotalScrollBackOffset?J.call(i,l.callbacks.onTotalScrollBackOffset):[0,0];if(s.trigger=a.trigger,0===f.scrollTop()&&0===f.scrollLeft()||(ae(".mCSB_"+s.idx+"_scrollbar").css("visibility","visible"),f.scrollTop(0).scrollLeft(0)),"_resetY"!==e||s.contentReset.y||(C("onOverflowYNone")&&l.callbacks.onOverflowYNone.call(i[0]),s.contentReset.y=1),"_resetX"!==e||s.contentReset.x||(C("onOverflowXNone")&&l.callbacks.onOverflowXNone.call(i[0]),s.contentReset.x=1),"_resetY"!==e&&"_resetX"!==e){switch(!s.contentReset.y&&i[0].mcs||!s.overflowed[0]||(C("onOverflowY")&&l.callbacks.onOverflowY.call(i[0]),s.contentReset.x=null),!s.contentReset.x&&i[0].mcs||!s.overflowed[1]||(C("onOverflowX")&&l.callbacks.onOverflowX.call(i[0]),s.contentReset.x=null),l.snapAmount&&(t=l.snapAmount instanceof Array?"x"===a.dir?l.snapAmount[1]:l.snapAmount[0]:l.snapAmount,o=e,n=t,r=l.snapOffset,e=Math.round(o/n)*n-r),a.dir){case"x":var g=ae("#mCSB_"+s.idx+"_dragger_horizontal"),w="left",v=m[0].offsetLeft,b=[u.width()-m.outerWidth(!1),g.parent().width()-g.width()],_=[e,0===e?0:e/s.scrollRatio.x],x=p[1],S=h[1],y=0<x?x/s.scrollRatio.x:0,T=0<S?S/s.scrollRatio.x:0;break;case"y":g=ae("#mCSB_"+s.idx+"_dragger_vertical"),w="top",v=m[0].offsetTop,b=[u.height()-m.outerHeight(!1),g.parent().height()-g.height()],_=[e,0===e?0:e/s.scrollRatio.y],x=p[0],S=h[0],y=0<x?x/s.scrollRatio.y:0,T=0<S?S/s.scrollRatio.y:0}_[1]<0||0===_[0]&&0===_[1]?_=[0,0]:_[1]>=b[1]?_=[b[0],b[1]]:_[0]=-_[0],i[0].mcs||(M(),C("onInit")&&l.callbacks.onInit.call(i[0])),clearTimeout(m[0].onCompleteTimeout),Q(g[0],w,Math.round(_[1]),d[1],a.scrollEasing),!s.tweenRunning&&(0===v&&0<=_[0]||v===b[0]&&_[0]<=b[0])||Q(m[0],w,Math.round(_[0]),d[0],a.scrollEasing,a.overwrite,{onStart:function(){a.callbacks&&a.onStart&&!s.tweenRunning&&(C("onScrollStart")&&(M(),l.callbacks.onScrollStart.call(i[0])),s.tweenRunning=!0,E(g),s.cbOffsets=[l.callbacks.alwaysTriggerOffsets||v>=b[0]+x,l.callbacks.alwaysTriggerOffsets||v<=-S])},onUpdate:function(){a.callbacks&&a.onUpdate&&C("whileScrolling")&&(M(),l.callbacks.whileScrolling.call(i[0]))},onComplete:function(){var e;a.callbacks&&a.onComplete&&("yx"===l.axis&&clearTimeout(m[0].onCompleteTimeout),e=m[0].idleTimer||0,m[0].onCompleteTimeout=setTimeout(function(){C("onScroll")&&(M(),l.callbacks.onScroll.call(i[0])),C("onTotalScroll")&&_[1]>=b[1]-y&&s.cbOffsets[0]&&(M(),l.callbacks.onTotalScroll.call(i[0])),C("onTotalScrollBack")&&_[1]<=T&&s.cbOffsets[1]&&(M(),l.callbacks.onTotalScrollBack.call(i[0])),s.tweenRunning=!1,m[0].idleTimer=0,E(g,"hide")},e))}})}function C(e){return s&&l.callbacks[e]&&"function"==typeof l.callbacks[e]}function M(){var e=[m[0].offsetTop,m[0].offsetLeft],t=[g[0].offsetTop,g[0].offsetLeft],o=[m.outerHeight(!1),m.outerWidth(!1)],n=[u.height(),u.width()];i[0].mcs={content:m,top:e[0],left:e[1],draggerTop:t[0],draggerLeft:t[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(o[0])-n[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(o[1])-n[1])),direction:a.dir}}},Q=function(e,t,o,n,i,a,r){e._mTween||(e._mTween={top:{},left:{}});var s,l,c=(r=r||{}).onStart||function(){},d=r.onUpdate||function(){},u=r.onComplete||function(){},m=K(),f=0,p=e.offsetTop,h=e.style,g=e._mTween[t];"left"===t&&(p=e.offsetLeft);var w=o-p;function v(){g.stop||(f||c.call(),f=K()-m,b(),f>=g.time&&(g.time=f>g.time?f+s-(f-g.time):f+s-1,g.time<f+1&&(g.time=f+1)),g.time<n?g.id=l(v):u.call())}function b(){0<n?(g.currVal=function(e,t,o,n,i){switch(i){case"linear":case"mcsLinear":return o*e/n+t;case"mcsLinearOut":return e/=n,e--,o*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return(e/=n/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t;case"easeInOutStrong":return(e/=n/2)<1?o/2*Math.pow(2,10*(e-1))+t:(e--,o/2*(2-Math.pow(2,-10*e))+t);case"easeInOut":case"mcsEaseInOut":return(e/=n/2)<1?o/2*e*e*e+t:o/2*((e-=2)*e*e+2)+t;case"easeOutSmooth":return e/=n,-o*(--e*e*e*e-1)+t;case"easeOutStrong":return o*(1-Math.pow(2,-10*e/n))+t;case"easeOut":case"mcsEaseOut":default:var a=(e/=n)*e,r=a*e;return t+o*(.499999999999997*r*a+-2.5*a*a+5.5*r+-6.5*a+4*e)}}(g.time,p,w,n,i),h[t]=Math.round(g.currVal)+"px"):h[t]=o+"px",d.call()}g.stop=0,"none"!==a&&function(){if(null==g.id)return;window.requestAnimationFrame?window.cancelAnimationFrame(g.id):clearTimeout(g.id);g.id=null}(),s=1e3/60,g.time=f+s,l=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return b(),setTimeout(e,.01)},g.id=l(v)},K=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},o=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],o=0;o<t.length;o++){var n=t[o];e._mTween[n].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[n].id):clearTimeout(e._mTween[n].id),e._mTween[n].id=null,e._mTween[n].stop=1)}},Z=function(t,o){try{delete t[o]}catch(e){t[o]=null}},ee=function(e){return!(e.which&&1!==e.which)},te=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},oe=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ne=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},ie=function(){var e=function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}();return!!e&&document[e]},ae.fn[f]=function(e){return p[e]?p[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===e?"undefined":_typeof(e))&&e?void ae.error("Method "+e+" does not exist"):p.init.apply(this,arguments)},ae[f]=function(e){return p[e]?p[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===e?"undefined":_typeof(e))&&e?void ae.error("Method "+e+" does not exist"):p.init.apply(this,arguments)},ae[f].defaults=i,window[f]=!0,ae(window).bind("load",function(){ae(n)[f](),ae.extend(ae.expr[":"],{mcsInView:ae.expr[":"].mcsInView||function(e){var t,o,n=ae(e),i=n.parents(".mCSB_container");if(i.length)return t=i.parent(),0<=(o=[i[0].offsetTop,i[0].offsetLeft])[0]+ne(n)[0]&&o[0]+ne(n)[0]<t.height()-n.outerHeight(!1)&&0<=o[1]+ne(n)[1]&&o[1]+ne(n)[1]<t.width()-n.outerWidth(!1)},mcsInSight:ae.expr[":"].mcsInSight||function(e,t,o){var n,i,a,r,s=ae(e),l=s.parents(".mCSB_container"),c="exact"===o[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(l.length)return n=[s.outerHeight(!1),s.outerWidth(!1)],a=[l[0].offsetTop+ne(s)[0],l[0].offsetLeft+ne(s)[1]],i=[l.parent()[0].offsetHeight,l.parent()[0].offsetWidth],a[0]-i[0]*(r=[n[0]<i[0]?c[0]:c[1],n[1]<i[1]?c[0]:c[1]])[0][0]<0&&0<=a[0]+n[0]-i[0]*r[0][1]&&a[1]-i[1]*r[1][0]<0&&0<=a[1]+n[1]-i[1]*r[1][1]},mcsOverflow:ae.expr[":"].mcsOverflow||function(e){var t=ae(e).data(G);if(t)return t.overflowed[0]||t.overflowed[1]}})})}()}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e:e(jQuery)}(function(m){function t(e){var t,o,n=e||window.event,i=w.call(arguments,1),a=0,r=0,s=0,l=0,c=0,d=0;if((e=m.event.fix(n)).type="mousewheel","detail"in n&&(s=-1*n.detail),"wheelDelta"in n&&(s=n.wheelDelta),"wheelDeltaY"in n&&(s=n.wheelDeltaY),"wheelDeltaX"in n&&(r=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(r=-1*s,s=0),a=0===s?r:s,"deltaY"in n&&(a=s=-1*n.deltaY),"deltaX"in n&&(r=n.deltaX,0===s&&(a=-1*r)),0!==s||0!==r){1===n.deltaMode?(a*=t=m.data(this,"mousewheel-line-height"),s*=t,r*=t):2===n.deltaMode&&(a*=o=m.data(this,"mousewheel-page-height"),s*=o,r*=o);var u,l=Math.max(Math.abs(s),Math.abs(r));return g&&!(l<g)||p(n,g=l)&&(g/=40),p(n,l)&&(a/=40,r/=40,s/=40),a=Math[1<=a?"floor":"ceil"](a/g),r=Math[1<=r?"floor":"ceil"](r/g),s=Math[1<=s?"floor":"ceil"](s/g),v.settings.normalizeOffset&&this.getBoundingClientRect&&(u=this.getBoundingClientRect(),c=e.clientX-u.left,d=e.clientY-u.top),e.deltaX=r,e.deltaY=s,e.deltaFactor=g,e.offsetX=c,e.offsetY=d,e.deltaMode=0,i.unshift(e,a,r,s),h&&clearTimeout(h),h=setTimeout(f,200),(m.event.dispatch||m.event.handle).apply(this,i)}}function f(){g=null}function p(e,t){return v.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var h,g,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],w=Array.prototype.slice;if(m.event.fixHooks)for(var n=e.length;n;)m.event.fixHooks[e[--n]]=m.event.mouseHooks;var v=m.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],t,!1);else this.onmousewheel=t;m.data(this,"mousewheel-line-height",v.getLineHeight(this)),m.data(this,"mousewheel-page-height",v.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null;m.removeData(this,"mousewheel-line-height"),m.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=m(e),o=t["offsetParent"in m.fn?"offsetParent":"parent"]();return o.length||(o=m("body")),parseInt(o.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return m(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};m.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(e){return e<10?"0"+e:e}var cx,escapable,gap,indent,meta,rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var o,n,i,a,r,s=gap,l=t[e];switch(l&&"object"===(void 0===l?"undefined":_typeof(l))&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),void 0===l?"undefined":_typeof(l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,o=0;o<a;o+=1)r[o]=str(o,l)||"null";return i=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+s+"]":"["+r.join(",")+"]",gap=s,i}if(rep&&"object"===(void 0===rep?"undefined":_typeof(rep)))for(a=rep.length,o=0;o<a;o+=1)"string"==typeof rep[o]&&(i=str(n=rep[o],l))&&r.push(quote(n)+(gap?": ":":")+i);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(i=str(n,l))&&r.push(quote(n)+(gap?": ":":")+i);return i=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+s+"}":"{"+r.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,o){var n;if(indent=gap="","number"==typeof o)for(n=0;n<o;n+=1)indent+=" ";else"string"==typeof o&&(indent=o);if((rep=t)&&"function"!=typeof t&&("object"!==(void 0===t?"undefined":_typeof(t))||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){var j;function walk(e,t){var o,n,i=e[t];if(i&&"object"===(void 0===i?"undefined":_typeof(i)))for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(void 0!==(n=walk(i,o))?i[o]=n:delete i[o]);return reviver.call(e,t,i)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(I){window.wxc=window.wxc||{},window.wxc.xcConfirm=function(e,t,o){var i=window.wxc.xcConfirm.btnEnum,n=window.wxc.xcConfirm.eventEnum,a={info:{title:"信息",icon:"0 0",btn:i.ok},success:{title:"成功",icon:"0 -48px",btn:i.ok},error:{title:"错误",icon:"-48px -48px",btn:i.ok},confirm:{title:"提示",icon:"-48px 0",btn:i.okcancel},warning:{title:"警告",icon:"0 -96px",btn:i.ok},input:{title:"输入",icon:"",btn:i.ok},custom:{title:"",icon:"",btn:i.ok}},r=t?t instanceof Object?t:a[t]||{}:{},s=I.extend(!0,{title:"",icon:"",btn:i.ok,onOk:I.noop,onCancel:I.noop,onClose:I.noop},r,o),l=I("<p>").html(e),c=I("<span>").addClass("tt").text(s.title),d=s.icon,u=d?I("<div>").addClass("bigIcon").css("backgroundPosition",d):"",m=s.btn,f=function e(){var t="pop_"+(new Date).getTime()+parseInt(1e5*Math.random());return 0<I("#"+t).length?e():t}(),p=I("<div>").addClass("xcConfirm"),h=I("<div>").addClass("xc_layer"),g=I("<div>").addClass("popBox"),w=I("<div>").addClass("ttBox"),v=I("<div>").addClass("txtBox"),b=I("<div>").addClass("btnArea"),_=I("<a>").addClass("sgBtn").addClass("ok").text("确定"),x=I("<a>").addClass("sgBtn").addClass("cancel").text("取消"),S=I("<input>").addClass("inputBox"),y=I("<a>").addClass("clsBtn"),T={ok:_,cancel:x};function C(){I(this);var e=I.trim(S.val());S.is(":visible")?s.onOk(e):s.onOk(),I("#"+f).remove(),s.onClose(n.ok)}function M(){I(this);s.onCancel(),I("#"+f).remove(),s.onClose(n.cancel)}function E(){I("#"+f).remove(),s.onClose(n.close),I(window).unbind("keydown")}!function(){a.input===r&&l.append(S);g.append(w.append(y).append(c)).append(v.append(u).append(l)).append(b.append(function(o){var n=I("<div>").addClass("btnGroup");return I.each(T,function(e,t){i[e]==(o&i[e])&&n.append(t)}),n}(m))),p.attr("id",f).append(h).append(g),I("body").append(p),_.click(C),I(window).bind("keydown",function(e){13==e.keyCode&&1==I("#"+f).length&&C()}),x.click(M),y.click(E)}()},window.wxc.xcConfirm.btnEnum={ok:parseInt("0001",2),cancel:parseInt("0010",2),okcancel:parseInt("0011",2)},window.wxc.xcConfirm.eventEnum={ok:1,cancel:2,close:3},window.wxc.xcConfirm.typeEnum={info:"info",success:"success",error:"error",confirm:"confirm",warning:"warning",input:"input",custom:"custom"}}(jQuery);