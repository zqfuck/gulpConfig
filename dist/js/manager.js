"use strict";$(document).ready(function(){var a=localStorage.companyId?localStorage.companyId:getCompanyId("qy_companyid");$(".focusSkip").focus(function(){$(".searchMask").show(),$("#zq-search").focus(),$(".listL").empty(),$(".listHot").empty();var e="";function t(){$.ajax({url:URL+"/appapi/wx/search",type:"get",dataType:"json",cache:!1,data:{id:a,value:e,pagesize:10,page:1},error:function(e){console.log(e)},success:function(e){var t;0==e.state.rc&&($(".listL").empty(),t=e.result.items,$.each(t,function(e,t){var o={nameSearch:t.name,nameLink:"details.html?cid="+t.cid+"&qy_companyid="+a},n=$("#nameList").render(o);$(".listL").append(n)}))}})}$("#zq-search").val(""),stop(),$.ajax({url:URL+"/webapi/banner/get-data",type:"get",dataType:"json",cache:!1,data:{id:a,type:3},error:function(e){console.log(e)},success:function(e){var o;0==e.state&&(e=e.data,o="",$.each(e,function(e,t){o+='<li class="zq-searchL zq-click">'+t.title+"</li>"}),$(".listHot").append(o))}}),$(".listHot").on("click",".zq-click",function(){$(".listL").empty(),e=$(this).text(),t()}),$("#zq-search").keyup(function(){$(".listL").empty(),$(".listL").removeClass("hidden"),e=$.trim($("#zq-search").val()),t()}),$(".zq-cancel").click(function(){$(".searchMask").hide(),move()})});new Vue({el:"#app",data:{managerList:[],page:1,pagesize:10,count:"",lock:!1},created:function(){this.getList()},methods:{toDetail:function(e,t,o,n,c){localStorage.userid=e,localStorage.cid=t,window.location.href="./manadetail.html?cid="+t+"&userid="+e+"&headImg="+o+"&nickName="+n+"&introDuce="+c+"&qy_companyid="+a},getList:function(){var o=this;$.ajax({url:"http://livetapi.v114.com/appapi/videoroom/streamerlist",type:"get",dataType:"json",data:{mediacloud_id:a,page:this.page,pagesize:this.pagesize},error:function(e){console.log(e)},success:function(e){var t;console.log(e),0==e.state.rc&&(o.count=e.result.count,t=e.result.data,$.each(t,function(e,t){o.managerList.push(t)})),o.lock=!0}})},loadMore:function(){var e=Math.ceil(this.count/this.pagesize);this.page++,this.page<=e&&this.getList()},getScrollTop:function(){var e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e},getClientHeight:function(){return document.body.clientHeight&&document.documentElement.clientHeight?Math.min(document.body.clientHeight,document.documentElement.clientHeight):Math.max(document.body.clientHeight,document.documentElement.clientHeight)},getScrollHeight:function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},liveState:function(e){return 0==e?"mnone":"mlive"}},mounted:function(){var e=this;window.onscroll=function(){e.getScrollTop()+e.getClientHeight()>=e.getScrollHeight()-60&&e.lock&&(e.loadMore(),e.lock=!1)}}})});